# Cinema Booking System

Курсовий проєкт із дисципліни **«Документування програмного забезпечення та шаблони проєктування»**.  
Система реалізує **веб‑додаток для бронювання та продажу квитків у кінотеатрі** з керуванням сеансами, залами, місцями, знижками, оплатою та аналітичними звітами.

---

## Основні можливості

- Перегляд афіші та детальної інформації про сеанси (опис, постер, тривалість, зал, дата й час).
- Перегляд схеми залу з вільними/зайнятими/обраними місцями та центрованим розташуванням рядів.
- Бронювання місць із таймером оплати та автоматичним скасуванням прострочених бронювань.
- Оплата бронювання з урахуванням знижок (попередній розрахунок суми, фінальна покупка, формування квитків).
- Система знижок (відсоткова, фіксована, без знижки) з можливістю підключення нових типів.
- Адмін‑панель для керування сеансами, залами/місцями, знижками та перегляду звітів.
- Звіти для адміністратора: продажі квитків, виручка, завантаженість залів по сеансах.

---

## Технології

### Backend

- Node.js 18+
- Express.js
- MySQL
- JWT аутентифікація

### Frontend

- React 18
- React Router
- Axios
- Власні CSS‑стилі (у тому числі для афіші, карток сеансів, форм логіну/реєстрації та модалей оплати)

---

## Патерни проєктування

У проєкті реалізовано кілька класичних шаблонів (GoF), які реально використовуються в коді.

### Strategy (Стратегія) — знижки

Реалізована в модулі `discounts`:

- `DiscountStrategy` — інтерфейс стратегії знижки.
- `NoDiscountStrategy` — без знижки.
- `PercentDiscountStrategy` — відсоткова знижка.
- `FixedDiscountStrategy` — фіксована сума знижки.
- `DiscountFactory` — фабрика, що за `discount_id` повертає потрібну стратегію.

Патерн дозволяє **динамічно підключати різні алгоритми знижок** без зміни бізнес‑логіки оплати; сервіс ціноутворення працює тільки з інтерфейсом стратегії.

### Strategy (Стратегія) — ціноутворення

Реалізована в модулі `pricing`:

- `PricingStrategy` — інтерфейс розрахунку базової вартості.
- `SimplePricingStrategy` — проста фіксована ціна за місце.
- `DynamicPricingStrategy` — динамічна ціна з урахуванням завантаженості залу / параметрів сеансу.
- `PricingFactory` — фабрика, що створює потрібну стратегію за типом (`simple` / `dynamic`).

Це дозволяє **міняти модель ціноутворення (звичайна чи динамічна)** без переписування сервісів бронювання та покупки.

### Observer (Спостерігач) — події бронювання

Реалізований у каталозі `events`:

- `BookingEventEmitter` — емітер подій (`booking_paid`, `booking_canceled` тощо).
- `BookingObservers` — підписники, які реагують на події (логування, підготовка звітів, подальші дії з бронюванням/квитками).

Після зміни статусу бронювання (оплата/скасування) емітер генерує подію, а **спостерігачі** виконують додаткову логіку, не засмічуючи основний сервіс покупки.

### Service Layer

- Бізнес‑логіка винесена в сервіси (`auth.service`, `shows.service`, `bookings.service`, `purchase.service`, `pricing.service`, `admin.service`).
- Контролери відповідають тільки за HTTP‑рівень: прийом запиту, валідація базових параметрів, виклик сервісів та формування відповіді.

---

## Ролі користувачів

### Admin

Має розширений доступ:

- Керування сеансами (створення, редагування, зміна залу й постеру).
- Керування знижками.
- Перегляд звітів: продажі, виручка, завантаженість залів.
- Огляд бронювань і квитків.

### User

Звичайний користувач:

- Перегляд афіші та схеми залу.
- Бронювання місць.
- Оплата бронювань із вибором знижки.
- Перегляд своїх бронювань/квитків у профілі.

Захист маршрутів реалізовано через JWT‑middleware (`auth.middleware`, `user.middleware`, `admin.middleware`); навігація на фронтенді змінюється залежно від ролі.

---

## Налаштування середовища

### Backend

cd backend
npm install
npm run migrate # якщо є скрипт міграцій
node src/server.js

За замовчуванням бекенд працює на `http://localhost:5000`.

### Frontend

cd frontend
npm install
npm start


Фронтенд працює на `http://localhost:3000` і звертається до API бекенду (наприклад, `http://localhost:5000/api`).
